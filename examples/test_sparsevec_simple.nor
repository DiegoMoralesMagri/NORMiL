// Test SparseVec - Phase 5.4
// Structure: indices (positions non-nulles), values (valeurs), dim (dimension totale)

print("=== Test SparseVec - Phase 5.4 ===")
print("")

// Test 1: Création basique
print("Test 1: Création OK")
sparse = SparseVec {
    indices: [0, 5, 10, 15],
    values: [1.5, 2.0, -0.5, 3.0],
    dim: 20
}
print("Dim: " + to_string(sparse.dim))
print("")

// Test 2: Accès aux données
print("Test 2: Données OK")
nnz = len(sparse.indices)
first_idx = sparse.indices[0]
first_val = sparse.values[0]
print("Non-zeros: " + to_string(nnz))
print("Premier index: " + to_string(first_idx))
print("Première valeur: " + to_string(first_val))
print("")

// Test 3: Modification
print("Test 3: Modification OK")
sparse.values = [1.0, 2.0, 3.0, 4.0]
print("Nouvelles valeurs OK")
print("")

// Test 4: Liste de SparseVec
print("Test 4: Liste OK")
sparse_list = [
    SparseVec {
        indices: [0, 1],
        values: [1.0, 2.0],
        dim: 10
    },
    SparseVec {
        indices: [5, 9],
        values: [0.5, 0.8],
        dim: 10
    }
]
print("Nombre: " + to_string(len(sparse_list)))
print("Premier dim: " + to_string(sparse_list[0].dim))
print("Deuxième nnz: " + to_string(len(sparse_list[1].indices)))
print("")

// Test 5: Fonction manipulant SparseVec
print("Test 5: Fonction OK")
fn count_nonzeros(sv: SparseVec) -> int {
    return len(sv.indices)
}

sparse_test = SparseVec {
    indices: [1, 3, 5, 7, 9],
    values: [1.0, 1.0, 1.0, 1.0, 1.0],
    dim: 100
}
nnz_count = count_nonzeros(sparse_test)
print("Compte non-zeros: " + to_string(nnz_count))
print("")

print("=== Tous les tests SparseVec réussis! ===")
